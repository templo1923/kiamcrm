import{j as a,_,I as g,aE as w,an as v,V as z}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab710.js";import{n as I,b as j,q as O,A as k,o as B,p as T}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab723.js";import{u as S,b as P}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab719.js";import{a as c}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab74.js";import{U as R}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab771.js";import{U as M,a as F}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7122.js";import{d as U}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7156.js";import{W as l,V as N}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab718.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab78.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab75.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab77.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab76.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab79.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab72.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab73.js";const V=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7172.js")),[]));function D({tabId:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(V,{tabId:e})})}const G=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7173.js")),[]));function q({id:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(G,{id:e})})}const W=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7174.js")),[]));function X({id:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(W,{id:e})})}const $=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7175.js")),[]));function J({tabId:e,aba_System:n}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx($,{tabId:e,aba_System:n})})}const H=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7176.js")),[]));function K({id:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(H,{id:e})})}async function Q(e){const n=S.getState().language,{user:d}=I.getState(),{userTabs:A}=j.getState(),{label:b}=O.getState();let s,r;if(e.type==="tab")switch(e.id){case 1:s=await l.Chat("List"),r=n.tab_all;break;case 2:s=await l.Chat("List","onlyGroups"),r=n.tab_groups;break;case 3:s=await l.Chat("List","nao-lido"),r=n.tab_unread;break;case 4:s=await l.Chat("List","1:1"),r=n.tab_1_1;break;case 5:s=await l.Chat("List",{type:"tab_atendentes",user:d}),r=n.tab_atendentes;break;default:const t=A.find(i=>i.id===e.id);s=t.chats,r=t.tag;break}else e.type==="crm"||(s=await l.Contact("List",{type:"withLabels",id:e.id}),r="Etiquetados");const C=await l.Utils("listGroupParticipants"),y=[];for(let t=0;t<s.length;t++){const i=s[t],p=await l.Utils("getContato",i.id);i.name=p.name;const f=C.find(m=>m.id===i.id);if(f)for(const m of f.participants)try{const h=await l.Utils("getContato",m.id);y.push({id:m.id,name:h.name})}catch{console.error("Contato de grupo nÃ£o capturado: ",m)}}s=s.concat(y),d.estado||(s=s.slice(0,5),g({type:"Info",message:n.modoGratuitoPermite5Contatos,position:"top-right"}));const x=new Set,L=s.filter(t=>x.has(t.id)?!1:(x.add(t.id),!0));if(L.length===0){g({type:"Error",message:n.semContatosParaExportar,position:"top-right"});return}const u={contacts:L.map(t=>({id:t.id,name:t.name})),labelName:b.nameID,tag:r};try{const t=await fetch(`${N.backend_utils}api/XLSX/exporttab`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!t.ok)throw new Error("Erro ao enviar dados para o servidor");const i=await t.json();U(i.XLSXbase64,`${b.nameID}_aba_${r}.xlsx`),g({type:"Success",message:n.exportSuccess,position:"top-right"})}catch(t){console.error("Erro ao exportar contatos:",t),g({type:"Error",message:n.erroEnvio,position:"top-right"})}}function fa({id:e,aba_System:n,type:d,name:A,color:b}){const{variaveisWA:s}=k(),{userTabs:r}=j(),C=R(),y=M(),x=F(),{open:L}=B(),{close:u}=T(),{isBusiness:t}=P(),{language:i}=S(),p=o=>{u(),L(o)},f=()=>{u(),Q({id:e,type:d})},m=()=>{u(),C()},h=[{id:1,nome:"menu_moreAba_addContact",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>p(a.jsx(D,{tabId:e}))},{id:2,nome:"menu_moreAba_importContactForEtiquet",type:"aba",aba_System:!1,isBusiness:!0,funcao:()=>p(a.jsx(K,{id:e}))},{id:3,nome:"menu_moreAba_copyContactForOtherAba",type:"aba",aba_System:!0,isBusiness:!1,funcao:()=>p(a.jsx(J,{tabId:e,aba_System:n}))},{id:4,nome:"menu_moreAba_exportAba",type:"aba",aba_System:!0,isBusiness:!1,funcao:()=>f()},{id:5,nome:"menu_moreAba_editar",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>{x(r.find(o=>o.id===e)),u()}},{id:6,nome:"menu_moreAba_remover",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>{y(r.find(o=>o.id===e)),u()}},{id:7,nome:"menu_moreAba_createTab",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>m()}],E=[{id:1,nome:"menu_moreAba_addContactLB",type:"Labels",funcao:()=>p(a.jsx(q,{id:e}))},{id:2,nome:"menu_moreAba_copyContactForOtherLB",type:"Labels",funcao:()=>p(a.jsx(X,{id:e}))},{id:3,nome:"menu_moreAba_exportLB",type:"Labels",funcao:()=>f()}];return a.jsxs("div",{children:[a.jsxs("div",{className:"flex gap-1 mx-3 pb-1 items-center",children:[a.jsx("span",{children:d==="Labels"?a.jsx(w,{size:24,style:{color:b}}):a.jsx(v,{size:24,style:{color:b}})}),a.jsx(z,{children:A})]}),a.jsx("div",{className:s.listagem.content1+"gap-1 flex flex-col",children:d==="tab"?h.map(o=>t===!1&&o.isBusiness===!0||n&&o.aba_System===!1?null:a.jsx("li",{className:"hoverShadown pulse cursor-pointer px-1 py-2",onClick:o.funcao,children:i[o.nome]},o.id)):E.map(o=>a.jsx("li",{className:"hoverShadown pulse cursor-pointer px-1 py-2",onClick:o.funcao,children:i[o.nome]},o.id))})]})}export{fa as default};
