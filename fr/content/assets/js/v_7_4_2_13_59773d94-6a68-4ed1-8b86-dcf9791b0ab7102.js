import{g as k,C as D,R as C,I as b,j as t,_ as N,a0 as y,V as I,aY as S,aZ as E,a3 as T,a1 as F,a2 as L}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab710.js";import{a as m}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab74.js";import{u as h,b as P}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab719.js";import{aF as z,aG as H,aH as O,aI as U,aJ as V,aK as K,aL as W,aM as q,aN as G,aO as $,aP as J,aQ as Y,aR as Q,aS as Z,aT as X,o as B,n as w,x as ee,q as se,a4 as ae,af as te}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab723.js";import{n as oe,m as re}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab721.js";import{b as ce,B as ne}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab732.js";import{M as ie,R as ue,f as le,b as pe,c as de,d as me}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab725.js";import{M as he,R as fe}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab734.js";import{a as A}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab733.js";import{M as ge,R as be}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab727.js";import{M as ke,R as xe}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab729.js";import{M as je,R as Be}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab728.js";import{M as Ne,R as ve}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab726.js";import{M as ye,R as we}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab731.js";import{r as Ae}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab735.js";import{c as Re}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab77.js";import{B as Me}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab772.js";import{e as _e}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7152.js";import{V as v}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab718.js";const R=async e=>{A.setState({notes:e}),await k("notes",e),chrome.runtime.sendMessage({action:"notesBackup"})},De=e=>{const s=[...A.getState().notes];e.forEach(a=>{const o=s.findIndex(c=>c.id===a.id);o===-1?s.push(a):s[o]=a}),R(s)},r=(e,s)=>{console.error(`Erro ao realizar a importação do backup: [${e}] `,s)},i=(e,s,a)=>{try{const{backup:o}=M.getState();if(s&&typeof o[e]=="string"){const c=D.decryptData(o[e]);return typeof c===a?{success:!0,backup:c}:{success:!1,backup:null}}else return typeof o[e]===a?{success:!0,backup:o[e]}:{success:!1,backup:null}}catch(o){return console.error("Error ao descompactar backup, key:",e,"erro da operação:",o),{success:!1,backup:null}}};function Ce(e,s,a){switch(e){case"respostasRapidas":Ie(i(e,s,"object"),i("categoria",s,"object"),i("respostasRapidasAcao",s,"object"),i("guardaMsg",s,"object"),i("medias",s,"object"),a);break;case"respostasRapidasAcao":case"guardaMsg":case"categoria":case"medias":console.warn(`A funcionalidade para "${e}" está inclusa em guardaMsg`);break;case"agendamentos":Ee(i(e,s,"object"),i("agendamentosNaoDisparados",s,"object"),i("sendAfterWhatsAppOpens",s,"object"),a);break;case"agendamentosNaoDisparados":case"sendAfterWhatsAppOpens":console.warn(`A funcionalidade para "${e}" está inclusa em agendamentos`);break;case"crm":Te(i(e,s,"object"),a);break;case"contatos":Fe(i(e,s,"object"),a);break;case"notes":Le(i(e,s,"object"),a);break;case"notifications":Pe(i(e,s,"object"),a);break;case"perfil":ze(i(e,s,"object"),a);break;case"userTabs":He(i(e,s,"object"),a);break;case"agrupamentos":Oe(i(e,s,"object"),a);break;case"relatorio":Ue(i(e,s,"object"),a);break;case"encomendas":Ve(i(e,s,"object"),a);break;case"autoatendimento":Ke(i(e,s,"object"),a);break;case"webhook":qe(i(e,s,"object"));break;case"IA":Ge(i(e,s,"object"));break;case"status":$e(i(e,s,"object"),a);break;case"pinChat":Je(i(e,s,"object"),a);break;case"atendimento":Ye(i(e,s,"object"));break;case"backupAutomatico":Qe(i(e,s,"object"));break;case"whatsApi":Ze(i(e,s,"object"));break;case"FollowUp":We(i(e,s,"object"),a);break;case"fluxo":Se(i(e,s,"object"),i("fluxoFiles",s,"object"),a);break;default:console.error("Chave de importação desconhecida:",e);break}}const Ie=(e,s,a,o,c,l)=>{try{if(!e.success&&!o.success){r("respostasRapidas, guardaMsg","[DescompressBackup] => Não retornou sucesso");return}e.success||(e.backup=[],console.warn("[respostasRapidas] => Vazio")),s.success||(s.backup=[],console.warn("[categoria] => Vazio")),a.success||(a.backup=[],console.warn("[respostasRapidasAcao] => Vazio")),o.success||(o.backup=[],console.warn("[guardaMsg] => Vazio")),c.success||(c.backup=[],console.warn("[medias] => Vazio"));const n=le(e.backup,o.backup),u=pe(a.backup,c.backup,e.backup,o.backup);l?de(u,n,s.backup):me(u,n,s.backup)}catch(n){r("guardaMsg, categoria, medias",n)}},Se=(e,s,a)=>{try{if(!e.success){r("fluxo","[DescompressBackup] => Não retornou sucesso");return}const o=e.backup;s.success&&k("fluxoFiles",s.backup),a?z(o):H(o),chrome.runtime.sendMessage({action:"reloadFluxo"})}catch(o){r("fluxo",o)}},Ee=(e,s,a,o)=>{try{let c=s.backup,l=a.backup;if(!e.success){r("agendamentos","[DescompressBackup] => Não retornou sucesso");return}s.success||(c=[],r("agendamentosNaoDisparados","[DescompressBackup] => Não retornou sucesso")),a.success||(l=!1,r("sendAfterWhatsAppOpens","[DescompressBackup] => Não retornou sucesso")),o?he(e.backup,c,l):fe(e.backup,c,l)}catch{}},Te=async({success:e,backup:s},a)=>{try{if(!e){r("crm","[DescompressBackup] => Não retornou sucesso");return}if(a){const o=await C("crm"),c=new Set,l=o.filter(p=>c.has(p.id)?!1:(c.add(p.id),!0)),n=s.filter(p=>!c.has(p.id)),u=l.concat(n);await k("crm",u),chrome.runtime.sendMessage({action:"post-crm"})}else await k("crm",s),chrome.runtime.sendMessage({action:"post-crm"})}catch(o){r("crm",o)}},Fe=({success:e,backup:s},a)=>{try{if(!e){r("contatos","[DescompressBackup] => Não retornou sucesso");return}a?Z(s):X(s)}catch(o){r("contatos",o)}},Le=({success:e,backup:s},a)=>{try{if(!e){r("notes","[DescompressBackup] => Não retornou sucesso");return}a?De(s):R(s)}catch(o){r("notes",o)}},Pe=({success:e,backup:s},a)=>{try{if(!e){r("notifications","[DescompressBackup] => Não retornou sucesso");return}a?ge(s):be(s)}catch(o){r("notifications",o)}},ze=({success:e,backup:s},a)=>{try{if(!e){r("perfil","[DescompressBackup] => Não retornou sucesso");return}a?Y(s):Q(s)}catch(o){r("perfil",o)}},He=({success:e,backup:s},a)=>{try{if(!e){r("userTabs","[DescompressBackup] => Não retornou sucesso");return}a?ie(s):ue(s)}catch(o){r("userTabs",o)}},Oe=({success:e,backup:s},a)=>{try{if(!e){r("agrupamentos","[DescompressBackup] => Não retornou sucesso");return}a?ke(s):xe(s)}catch(o){r("agrupamentos",o)}},Ue=({success:e,backup:s},a)=>{try{if(!e){r("relatorio","[DescompressBackup] => Não retornou sucesso");return}a?je(s):Be(s)}catch(o){r("relatorio",o)}},Ve=({success:e,backup:s},a)=>{try{if(!e){r("encomendas","[DescompressBackup] => Não retornou sucesso");return}a?Ne(s):ve(s)}catch(o){r("encomendas",o)}},Ke=({success:e,backup:s},a)=>{try{if(!e){r("autoatendimento","[DescompressBackup] => Não retornou sucesso");return}a?$(s):J(s)}catch(o){r("autoatendimento",o)}},We=({success:e,backup:s},a)=>{try{if(!e){r("autoatendimento","[DescompressBackup] => Não retornou sucesso");return}a?O(s):U(s)}catch(o){r("autoatendimento",o)}},qe=({success:e,backup:s})=>{try{if(!e){r("webhook","[DescompressBackup] => Não retornou sucesso");return}G(s)}catch(a){r("webhook",a)}},Ge=({success:e,backup:s})=>{try{if(!e){r("IA","[DescompressBackup] => Não retornou sucesso");return}q(s)}catch(a){r("IA",a)}},$e=({success:e,backup:s},a)=>{try{if(!e){r("status","[DescompressBackup] => Não retornou sucesso");return}a?ye(s):we(s)}catch(o){r("status",o)}},Je=({success:e,backup:s},a)=>{try{if(!e){r("pinChat","[DescompressBackup] => Não retornou sucesso");return}a?K(s):W(s)}catch(o){r("pinChat",o)}},Ye=({success:e,backup:s})=>{try{if(!e){r("atendimento","[DescompressBackup] => Não retornou sucesso");return}V(s)}catch(a){r("atendimento",a)}},Qe=({success:e,backup:s})=>{try{if(!e){r("backupAutomatico","[DescompressBackup] => Não retornou sucesso");return}ce(s)}catch(a){r("backupAutomatico",a)}},Ze=({success:e,backup:s})=>{try{if(!e){r("whatsApi","[DescompressBackup] => Não retornou sucesso");return}Ae(s)}catch(a){r("whatsApi",a)}},M=Re()((e,s)=>({backup:null,keys:[],extractFile:a=>{const{language:o}=h.getState(),{close:c}=B.getState(),l=new FileReader;l.readAsText(a,"UTF-8"),l.onload=n=>{try{const u=JSON.parse(n.target.result);if(typeof u!="object"){b({type:"Error",message:o.fileNotBK,position:"top-right"});return}const p=ne.filter(f=>f.keys.some(g=>f.tag==="all"?!0:!!u[g.key]));e({keys:p,backup:u})}catch(u){c(),console.error("Erro ao importar Backup",u),b({type:"Error",message:o.fileNotBK,position:"top-right"})}}},setActiveKey:(a,o)=>e(c=>({keys:c.keys.map(n=>a==="all"?{...n,checked:o}:n.tag===a?{...n,checked:o}:n.tag==="all"&&!o?{...n,checked:!1}:n)})),setActiveMerge:(a,o)=>e(c=>({keys:c.keys.map(n=>a==="all"?{...n,merge:o}:n.tag===a?{...n,merge:o}:n.tag==="all"&&!o?{...n,merge:!1}:n)})),formatBackup:()=>{const{keys:a}=s(),{close:o,openRendertype:c}=B.getState(),{language:l}=h.getState(),{user:n}=w.getState();if(!a.find(u=>u.checked)){b({type:"Error",message:l.selectBkItemImport,position:"top-right"});return}if(!n.estado){c("user_free");return}for(const u of a)if(u.tag!=="all"&&u.checked)for(const p of u.keys)Ce(p.key,p.compress,u.merge);o(),b({type:"Success",message:l.backupImported,position:"top-right"})}}));function Xe(){const{idioma:e,setIdioma:s}=h(),a=c=>{s(c),chrome.runtime.sendMessage({action:"languageReload",lang:c})};return t.jsxs("select",{className:"select pt-0 select-bordered select-sm w-fit max-w-xs shadow-sm",value:e,onChange:c=>{a(c.target.value)},id:"select-language",children:[t.jsx("option",{value:"pt",children:"Português"}),t.jsx("option",{value:"es",children:"Español"}),t.jsx("option",{value:"en",children:"English"})]})}const es=m.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7161.js")),[]));function ss(){return t.jsx(m.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(es,{})})}const as=m.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7162.js")),[]));function ts(){return t.jsx(m.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(as,{})})}const os=m.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7163.js")),[]));function rs(){return t.jsx(m.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(os,{})})}function cs(){const{privacityOptions:e,setPrivacityOptions:s}=oe(),{language:a}=h(),o=n=>{s({...e,[n]:{hide:!e[n].hide}})},c=[{tag:"photoHidden",nome:a.ocutar_foto,checked:e.photoHidden.hide},{tag:"nameHidden",nome:a.ocutar_nome,checked:e.nameHidden.hide},{tag:"midiaHidden",nome:a.ocutar_midia,checked:e.midiaHidden.hide},{tag:"galeryHidden",nome:a.ocutar_galeria,checked:e.galeryHidden.hide},{tag:"lastMessageHidden",nome:a.ocutar_mensagem,checked:e.lastMessageHidden.hide},{tag:"messageHidden",nome:a.ocutar_chat,checked:e.messageHidden.hide}];return t.jsx(t.Fragment,{children:c.map((n,u)=>t.jsx("label",{htmlFor:n.tag,children:t.jsxs("div",{className:"flex justify-between cursor-pointer items-center h-9 py-2 rounded-lg hover:bg-[var(--dropdown-background-hover)] px-2",children:[t.jsx("span",{children:n.nome}),t.jsx(y,{id:n.tag,switchUpdate:()=>{o(n.tag)},estado:n.checked})]})},u))})}const d="flex justify-between cursor-pointer items-center h-9 py-2 rounded-lg hover:bg-[var(--dropdown-background-hover)] px-2";function ns(){const{language:e}=h(),{theme:s,setTheme:a}=P(),{open:o}=B(),{close:c}=re(),{extractFile:l}=M(),{setRemoveUser:n,user:u}=w(),{tema:p,setTema:f}=ee(),{label:g}=se(),[x,_]=m.useState(!1);return t.jsxs("div",{children:[t.jsx(I,{children:e.configAgendamento_title}),t.jsxs("div",{className:"pt-2 flex flex-col gap-2 overflow-auto",style:{maxHeight:"calc(100vh - 70px)"},children:[t.jsx("label",{htmlFor:"select-language",children:t.jsxs("div",{className:d,children:[t.jsx("span",{children:e.idioma}),t.jsx(Xe,{})]})}),t.jsx("label",{htmlFor:"handleTheme",children:t.jsxs("div",{className:d,children:[t.jsx("span",{children:e.tema}),t.jsx(y,{estado:s,switchUpdate:()=>a(!s),id:"handleTheme"})]})}),t.jsx("label",{htmlFor:"handleMenuTheme",children:t.jsxs("div",{className:d,children:[t.jsx("span",{children:e.tema_menu}),t.jsxs("select",{className:"select pt-0 select-bordered select-sm w-fit max-w-xs shadow-sm",value:p,onChange:j=>{f(j.target.value)},id:"handleMenuTheme",children:[t.jsx("option",{value:"default",children:e.default}),t.jsx("option",{value:"dark",children:e.dark}),t.jsx("option",{value:"original",children:e.original}),t.jsx("option",{value:"whats",children:e.whats}),t.jsx("option",{value:"prime",children:e.prime}),t.jsx("option",{value:"dim",children:e.dim})]})]})}),t.jsx("div",{onClick:()=>window.open(v.painel_Gestor,"_blank"),className:d,children:t.jsx("span",{children:e.painel_Gestor})}),t.jsxs("div",{onClick:()=>_(!x),className:d,children:[t.jsx("span",{children:e.privacidade}),t.jsx("span",{className:"w-fit",children:x?t.jsx(S,{className:"w-6 h-6"}):t.jsx(E,{className:"w-6 h-6"})})]}),x&&t.jsx(cs,{}),t.jsx("div",{onClick:()=>{c(),o(t.jsx(ts,{}))},className:d,children:t.jsx("span",{children:e.backup})}),t.jsx("label",{htmlFor:"jsonInput",children:t.jsxs("div",{className:d,children:[t.jsx("span",{children:e.import_backup}),t.jsx("input",{type:"file",accept:".json",id:"jsonInput",className:"hidden",onChange:j=>{l(j.target.files[0]),c(),o(t.jsx(rs,{}))}})]})}),t.jsx("div",{onClick:()=>{c(),o(t.jsx(ss,{}))},className:d,children:t.jsx("span",{children:e.backupAutomatico})}),t.jsx("div",{onClick:()=>{c(),o(t.jsx(ae,{}),!0)},className:d,children:t.jsx("span",{children:e.assistenteIA})}),t.jsx("div",{onClick:()=>_e(!0),className:d,children:t.jsx("span",{children:e.exportarTodosPerfis})}),t.jsxs("div",{className:"flex justify-between",children:[g.rewards.length!==0&&t.jsx("span",{className:"m-auto",children:t.jsx(Me,{})}),u.estado&&t.jsx("span",{className:"m-auto",children:t.jsx(T,{btnPremium:e.btnPremiumLogado,checkout:g.checkout})})]}),t.jsx("div",{className:"flex items-center justify-center gap-4 pb-4 pt-4",children:u.estado?t.jsx(F,{name:e.deslogar,funcao:n}):t.jsx(L,{name:e.logar,funcao:()=>{c(),o(t.jsx(te,{}))}})})]}),t.jsx("div",{className:"absolute bottom-0 mb-[7px]",style:{width:"calc(100% - 30px)"},children:t.jsxs("div",{className:"flex justify-between",children:[u.login.length!==0&&t.jsx("kbd",{className:"kbd kbd-sm mb-1 rounded",children:u.login}),t.jsxs("kbd",{className:"kbd kbd-sm mb-1  rounded",children:[e.version," ",v.version]})]})})]})}const Ms=Object.freeze(Object.defineProperty({__proto__:null,default:ns},Symbol.toStringTag,{value:"Module"}));export{Ms as i,M as u};
