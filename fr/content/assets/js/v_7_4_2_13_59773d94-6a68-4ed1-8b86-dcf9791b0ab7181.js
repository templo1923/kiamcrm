import{j as e,_ as H,bc as N,V as G,b6 as U,a5 as O,$ as W,a2 as v,cE as Q,I as o,r as Y}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab710.js";import{a as j}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab74.js";import{q as J,ao as K,o as X,ar as Z}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab723.js";import{u as ee}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab734.js";import{u as ae}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab719.js";import{R as te}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7136.js";import{M as w}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7133.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab747.js";import{E as se}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7116.js";import{a as E}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7108.js";import{C as re}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7115.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab718.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab76.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab78.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab75.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab77.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab79.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab72.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab73.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7180.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab764.js";import"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7155.js";const ie=j.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7213.js")),[]));function oe({updateForm:d,resID:c}){return e.jsx(j.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(ie,{updateForm:d,resID:c})})}const De=({create:d,agendamento:c,userId:m,name:u,tipo:b,resID:k=""})=>{var y,R;const _=J(s=>s.label),{addAgendamento:M,editAgendamento:A}=ee(),{language:t,idioma:T}=ae(),x=K.getState().quickReplies,{open:g}=X(),[r,h]=j.useState(()=>{if(d)return"respostaRapida";if(c.respostaRapida&&c.respostaRapida.length!==0)return"respostaRapida";switch(c.tipo){case"txt":return"txt";case"audio":return"audio";case"respostaRapida":return"respostaRapida";default:return"midia"}}),[a,p]=j.useState(c||{id:"",tipo:"txt",userID:m,titulo:"",mensagem:"",respostaRapida:k,base64:"",base64Name:"",recorrencia:"",recorrenciaManual:!1,data:"",hora:""}),n=(s,i)=>{s==="recorrenciaManual"&&D(),p(l=>({...l,[s]:i}))},f=()=>{p({...a,base64:"",base64Name:"",mensagem:"",respostaRapida:""})},D=()=>{p({...a,recorrencia:""})},z=async()=>{if(a.data.length===0||a.hora.length===0){o({type:"Error",message:t.agendamento_Notif_error,position:"top-right"});return}const s=new Date,i=new Date(`${a.data}T${a.hora}`),l=Math.floor((i.getTime()-s.getTime())/(1e3*60));if(i.toDateString()===s.toDateString()){if(l<-1){o({type:"Error",message:t.agenDataHoraErro,position:"top-right"});return}}else if(i<s){o({type:"Error",message:t.agenDataErro,position:"top-right"});return}if(a.tipo==="txt"&&r!=="respostaRapida"&&r!=="audio"&&a.mensagem.trim().length===0){o({type:"Error",message:t.agendamento_Notif_msg,position:"top-right"});return}if(r==="audio"&&a.base64.length===0){o({type:"Error",message:t.agendamento_Notif_msgError_audio,position:"top-right"});return}if(r==="respostaRapida"&&x.length===0){o({type:"Error",message:t.agendamento_notRes,position:"top-right"});return}if(await Z("agendamentos")!==!0){if(a.titulo.length===0&&(a.titulo=`${t.naoDefinido}`),a.id=Y(),r==="respostaRapida"&&!a.respostaRapida&&(a.respostaRapida=x[0].id),(r==="txt"||r==="respostaRapida")&&(a.base64="",a.base64Name=""),r!=="respostaRapida"&&(a.respostaRapida=""),r==="txt"&&(a.tipo="txt"),r==="audio"&&(a.tipo="audio",a.base64=a.base64,a.base64Name=a.base64Name),r==="respostaRapida"&&(a.tipo="respostaRapida"),a.recorrenciaManual&&a.recorrencia===""){o({type:"Error",message:t.recorrenciaPersonalizada,position:"top-right"});return}M(a),o({type:"Success",message:t.agendamento_Notif_success,position:"top-right"}),g(e.jsx(w,{userId:m,name:u}))}},C=()=>{if(a.data.length===0||a.hora.length===0){o({type:"Error",message:t.agendamento_Notif_error,position:"top-right"});return}const s=new Date,i=new Date(`${a.data}T${a.hora}`),l=Math.floor((i.getTime()-s.getTime())/(1e3*60));if(i.toDateString()===s.toDateString()){if(l<-1){o({type:"Error",message:t.agenDataHoraErro,position:"top-right"});return}}else if(i<s){o({type:"Error",message:t.agenDataErro,position:"top-right"});return}if(a.tipo==="txt"&&r!=="respostaRapida"&&r!=="audio"&&a.mensagem.trim().length===0){o({type:"Error",message:t.agendamento_Notif_msg,position:"top-right"});return}if(r==="audio"&&a.base64.length===0){o({type:"Error",message:t.agendamento_Notif_msgError_audio,position:"top-right"});return}if(r==="respostaRapida"&&x.length===0){o({type:"Error",message:t.agendamento_notRes,position:"top-right"});return}if(a.titulo.length===0&&(a.titulo=`${t.naoDefinido}`),(r==="txt"||r==="respostaRapida")&&(a.base64="",a.base64Name=""),r!=="respostaRapida"&&(a.respostaRapida=""),r==="txt"&&(a.tipo="txt"),r==="audio"&&(a.tipo="audio",a.base64=a.base64,a.base64Name=a.base64Name),r==="respostaRapida"&&(a.tipo="respostaRapida"),a.recorrenciaManual&&a.recorrencia===""){o({type:"Error",message:t.recorrenciaPersonalizada,position:"top-right"});return}A(a,b),o({type:"Success",message:t.agendamento_Notif_successEdit,position:"top-right"}),g(e.jsx(w,{userId:m,name:u}))},S=()=>{b==="agendamento"?g(e.jsx(w,{userId:m,name:u})):b==="relatorio"&&g(e.jsx(te,{userId:m,name:u}))},F=s=>{let i=s.type.split("/")[0];i!=="image"&&i!=="audio"&&i!=="video"&&(i="doc");const l=new FileReader;l.onloadend=function(){const B=l.result;p({...a,tipo:i,base64:B,base64Name:s.name.split(".")[0]})},l.readAsDataURL(s)},L=e.jsxs("div",{className:"form-control w-full",children:[e.jsxs("div",{className:"!flex gap-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:t.agendamento_msg})}),e.jsx("span",{className:"pulse cursor-pointer lg:tooltip lg:-bottom tooltip-w-fit  before:!w-44 mt-2","data-tip":t.agendamento_infoTagNome,children:e.jsx(N,{className:"w-5 h-5 text-[var(--icon)]"})})]}),e.jsx(se,{id:"agendamento_textarea",type:"textarea",className:"w-full",position:"right",placeholder:t.agendamento_placeMsg,text:a.mensagem,setText:s=>n("mensagem",s),heightCamp:150})]}),q=()=>e.jsxs("div",{className:"flex flex-col justify-start self-start h-full items-start w-auto",children:[e.jsxs("div",{className:"!flex gap-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:t.agendamento_GravarAudio})}),e.jsx("span",{className:"pulse cursor-pointer lg:tooltip lg:tooltip-bottom tooltip-w-fit  before:!w-44 mt-2","data-tip":t.agendamento_tolltip_audio,children:e.jsx(N,{className:"w-5 h-5 text-[var(--icon)]"})})]}),e.jsx("div",{className:"w-[250px] m-auto flex justify-center items-center gap-1",children:e.jsx(Q,{id:"audio_agendamento",base64:a.base64,onBase64:i=>p({...a,base64:i}),idioma:T})})]}),P=()=>e.jsxs("div",{className:"flex flex-col justify-start self-start h-full items-start w-auto",children:[e.jsxs("div",{className:"!flex gap-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:t.agenGravarAudio})}),e.jsx("span",{className:"pulse cursor-pointer lg:tooltip lg:tooltip-bottom tooltip-w-fit  before:!w-44 mt-2","data-tip":t.botaoIniciarGravcaoAudio,children:e.jsx(N,{className:"w-5 h-5 text-[var(--icon)]"})})]}),e.jsxs("div",{className:"flex w-auto items-center justify-start gap-1",children:[e.jsx("audio",{src:a.base64,className:"w-[250px]",controls:!0}),e.jsx("span",{className:"cursor-pointer pulse",onClick:()=>n("base64",""),children:e.jsx(E,{className:"w-5 h-5 text-red-500"})})]})]}),$=()=>e.jsxs("label",{className:"m-auto p-2 border-base-200 hover:border-[var(--primaria)] border border-solid rounded-lg h-24 w-20 pulse flex justify-center items-center flex-col shadow-lg cursor-pointer mt-16",children:[e.jsx(re,{className:"h-6 w-6 text-[var(--primaria)]",strokeWidth:1}),e.jsx("strong",{className:"text-[var(--primaria)]",children:t.importar}),e.jsx("input",{type:"file",className:"hidden",onChange:i=>F(i.target.files[0])})]}),I=()=>{let s;switch(a.tipo){case"image":s=e.jsx("img",{src:a.base64,className:"w-[150px] max-h-[180px]"});break;case"video":s=e.jsx("video",{src:a.base64,className:"w-[150px] max-h-[180px]",controls:!0});break;case"audio":s=e.jsx("audio",{src:a.base64,className:"w-[150px]",controls:!0});break;default:s=e.jsx("div",{className:"animate__animated animate__zoomIn",children:e.jsx("div",{className:"tvf2evcx m0h2a7mj lb5m6g5c j7l1k36l ktfrpxia nu7pwgvd p357zi0d dnb887gk gjuq5ydh i2cterl7 ac2vgrno f8m0rgwh gndfcl4n cm280p3y jmly3brn qqs366u4 ikqdvm1y m3qqxsiz r1ncx0sg mmj7r7ye py-2",children:e.jsxs("div",{className:"du8bjn1j px-2 !m-0",children:[e.jsx("span",{"data-icon":"preview-generic",className:"flex justify-center",children:e.jsxs("svg",{viewBox:"0 0 88 110",height:"110",width:"88",preserveAspectRatio:"xMidYMid meet",children:[e.jsx("g",{transform:"translate(4 3)",children:e.jsx("path",{"stroke-opacity":"0.08",stroke:"#000",d:"M3-.5h56.929a5.5 5.5 0 0 1 3.889 1.61l15.071 15.072a5.5 5.5 0 0 1 1.611 3.89V101a3.5 3.5 0 0 1-3.5 3.5H3A3.5 3.5 0 0 1-.5 101V3A3.5 3.5 0 0 1 3-.5z",fill:"#FFF","fill-rule":"evenodd"})}),e.jsx("path",{d:"M65.5 3.5v15a3 3 0 0 0 3 3h15","stroke-opacity":"0.12",stroke:"#000",fill:"#FFF"})]})}),e.jsx("span",{className:"pt-1 text-center font-semibold w-full block uppercase",children:"documento"})]})})});break}return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex justify-end w-full",children:e.jsx("span",{className:"cursor-pointer pulse",onClick:()=>n("base64",""),children:e.jsx(E,{className:"w-5 h-5 text-red-500"})})}),s]})},V=()=>e.jsx("div",{className:"mt-4",children:e.jsx(oe,{updateForm:n,resID:a.respostaRapida})});return e.jsxs("div",{className:"w-[600px] grid gap-4 overflow-auto pr-1",style:{maxHeight:"calc(100vh - 70px)"},children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs(G,{children:[d?t.create:t.edit," ",t.agendamento]}),((R=(y=_.videos_tutoriais)==null?void 0:y.mensagens_agendadas)==null?void 0:R.length)>0&&e.jsx(U,{funcao:()=>window.open(_.videos_tutoriais.mensagens_agendadas,"_blank")})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:[t.agendamento_table_titulo," (",t.opcional,")"]})}),e.jsx("input",{type:"text",placeholder:t.agendamento_PlaceTitulo,className:"input input-bordered w-full input-sm",value:a.titulo,onChange:s=>n("titulo",s.target.value)})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:t.agendamento_selectType})}),e.jsxs("div",{className:"tabs tabs-boxed w-fit",children:[e.jsx("a",{className:"tab font-bold "+(r==="txt"?"tab-active !bg-[var(--primaria)] !text-[var(--letra)]":""),onClick:()=>{h("txt"),f()},children:t.agendamento_createText}),e.jsx("a",{className:"tab font-bold "+(r==="midia"?"tab-active !bg-[var(--primaria)] !text-[var(--letra)]":""),onClick:()=>{h("midia"),f()},children:t.agendamento_midia}),e.jsx("a",{className:"tab font-bold "+(r==="audio"?"tab-active !bg-[var(--primaria)] !text-[var(--letra)]":""),onClick:()=>{h("audio"),f()},children:t.agendamento_audio}),e.jsx("a",{className:"tab font-bold "+(r==="respostaRapida"?"tab-active !bg-[var(--primaria)] !text-[var(--letra)]":""),onClick:()=>{h("respostaRapida"),f(),n("respostaRapida",x[0].id)},children:t.agendamento_select_resposta})]}),r==="respostaRapida"?e.jsx(V,{}):e.jsxs("div",{className:"flex gap-4 items-center pt-4",children:[r==="midia"&&(!a.base64||a.base64.length===0?$():I()),r==="audio"&&(!a.base64||a.base64.length===0?q():P()),L]})]}),e.jsxs("div",{className:"flex justify-between gap-6",children:[e.jsxs("div",{className:"form-control w-full max-w-xs",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:t.agendamento_table_data})}),e.jsx("input",{type:"Date",className:"input input-bordered w-full max-w-xs input-sm",value:a.data,onChange:s=>n("data",s.target.value)})]}),e.jsxs("div",{className:"form-control w-full max-w-xs",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:t.agendamento_table_hora})}),e.jsx("input",{type:"time",className:"input input-bordered w-full max-w-xs input-sm cursor-pointer",value:a.hora,onChange:s=>n("hora",s.target.value)})]})]}),!a.recorrenciaManual&&e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:t.agendamento_recorrencia})}),e.jsxs("select",{className:"!py-0 select select-bordered !select-sm w-full",onChange:s=>n("recorrencia",s.target.value),value:a.recorrencia?a.recorrencia:"",children:[e.jsx("option",{value:"",children:t.noneSelected}),e.jsx("option",{value:"diario",children:t.diario}),e.jsx("option",{value:"semanal",children:t.semanal}),e.jsx("option",{value:"quinzenal",children:t.quinzenal}),e.jsx("option",{value:"mensal",children:t.mensal}),e.jsx("option",{value:"trimestral",children:t.trimestral}),e.jsx("option",{value:"semestral",children:t.semestral}),e.jsx("option",{value:"anual",children:t.anual})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"form-control w-full",children:e.jsxs("label",{className:"label gap-2 cursor-pointer w-fit !pt-0",htmlFor:"set-recorrencia",children:[e.jsx(O,{id:"set-recorrencia",estado:a.recorrenciaManual,checkedUpdade:()=>n("recorrenciaManual",!a.recorrenciaManual)}),e.jsx(W,{children:t.addRecorrenciaPersonalizada})]})}),a.recorrenciaManual&&e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:t.recorrenciaPersonalizadaTitle})}),e.jsx("input",{type:"number",placeholder:t.recorrenciaPlace,className:"input input-bordered w-full input-sm",value:a.recorrencia,onChange:s=>n("recorrencia",s.target.value)})]})]}),e.jsxs("div",{className:"flex justify-between pt-4 resize-none",children:[e.jsx(v,{name:t.cancel,funcao:S}),d?e.jsx(v,{name:t.create,funcao:z}):e.jsx(v,{name:t.edit,funcao:C})]})]})};export{De as default};
