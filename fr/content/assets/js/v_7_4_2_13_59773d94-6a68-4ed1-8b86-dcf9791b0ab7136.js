import{j as e,_ as C,V as Q,a7 as Y,aj as Z,ay as ee,b6 as te,a2 as ae,U as se,ap as ne}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab710.js";import{a as o}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab74.js";import{e as ie,F as re}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab75.js";import{u as le}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab734.js";import{u as oe}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab719.js";import{q as ce,A as de,o as xe,p as me,b0 as fe,b1 as pe}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab723.js";import{A as D}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7180.js";import{W as T}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab718.js";import{a as ue}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7108.js";import{U as he}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab764.js";import{a as ge,b as je}from"./v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7155.js";const be=o.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7178.js")),[]));function ve({userId:l,name:c}){return e.jsx(o.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(be,{userId:l,name:c})})}const ye=o.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_13_59773d94-6a68-4ed1-8b86-dcf9791b0ab7179.js")),[]));function _e(){return e.jsx(o.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(ye,{})})}function I({userId:l,name:c}){var w,A;const p=ce(t=>t.label),{variaveisWA:u}=de(),{agendamentos:m,agendamentosNaoDisparados:h,removeAgendamento:M,buttonActive:r,setButtonActive:E,openUserChat:k}=le(),[b,v]=o.useState(!1),[x,L]=o.useState(r?m:m.filter(t=>t.userID===l)),{language:s}=oe(),[H,S]=o.useState(new Map),z=async t=>{const i=await T.Contact("getProfilePictureUrl",t),{name:a}=await T.Utils("getContato",t);return{nome:a,base64:i}},O=async t=>{const i=Array.from(new Set(t.map(n=>n.userID))),a=new Map;for(const n of i){const d=await z(n);a.set(n,d)}S(a)};o.useEffect(()=>{O(x)},[x]);const g=t=>H.get(t)||{nome:"",base64:""};o.useEffect(()=>{const t=new Date().getTime(),a=(r?m:m.filter(n=>n.userID===l)).sort((n,d)=>{const X=new Date(`${n.data}T${n.hora}:00`).getTime(),q=new Date(`${d.data}T${d.hora}:00`).getTime(),J=Math.abs(X-t),K=Math.abs(q-t);return J-K});L(a)},[m,r,l,h]);const{open:f}=xe(),{open:P}=me(),y=50,_=37,N="calc(85vh - 300px)",j="950px",R=()=>{const t=x.length*y+_,i=parseInt(N.replace(/[^\d]/g,""));return Math.min(t,i)},U=t=>{f(e.jsx(D,{agendamento:t,create:!1,userId:l,name:c,tipo:"agendamento"}))},$=async()=>{f(e.jsx(D,{agendamento:null,create:!0,userId:l,name:c,tipo:"agendamento"}))},B=(t,i,a=!0)=>{const n=i,d=i.parentElement;P(t,{placement:"bottom-end"},n,0,{mounted:()=>{d.classList.add("_ajv9"),a&&n.classList.add("x11t6m9b")},desmouted:()=>{d.classList.remove("_ajv9"),n.classList.remove("x11t6m9b")}})},W=t=>{k(t.userID),f(e.jsx(I,{userId:t.userID,name:c}))},F=({index:t,style:i})=>{const a=x[t];return e.jsxs("div",{style:i,className:"flex items-center rounded-lg hover:bg-base-200 cursor-pointer h-full border-solid border-b border-[var(--border-list)] last-of-type:border-none",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("span",{className:"break-words truncate",style:{maxWidth:"100px"},children:a.titulo})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[g(a.userID).base64==="undefined"?e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx(he,{})}):e.jsx("img",{src:g(a.userID).base64,className:"w-8 h-8 rounded-full object-cover",alt:"User"}),e.jsx("p",{className:"break-words truncate",style:{maxWidth:"92px"},children:g(a.userID).nome})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.tipo}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:se.converterData(a.data)}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.hora}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.recorrenciaManual?a.recorrencia?`${a.recorrencia} ${s.dias}`:s.vazia:s[a.recorrencia]||s.vazia}),e.jsxs("div",{className:"flex-1 flex items-center justify-center gap-1",children:[e.jsx("span",{className:"pulse",onClick:()=>U(a),children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx("span",{className:"pulse",onClick:()=>M(a.id,"agendamento"),children:e.jsx(ue,{className:"h-4 w-4"})}),r&&l!==a.userID&&e.jsx("span",{className:"pulse lg:tooltip lg:tooltip-left",onClick:()=>W(a),"data-tip":s.agenOpenChat,children:e.jsx(pe,{className:"h-4 w-4"})})]})]},a.id)},G=()=>e.jsx("div",{className:"w-full border-collapse",children:e.jsxs("div",{className:"flex font-bold",children:[e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_titulo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_cliente}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_tipo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_data}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_hora}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_recorrencia}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_acao})]})}),V=()=>{v(!0),E(!r),setTimeout(()=>{v(!1)},700)};return e.jsxs("div",{className:"grid gap-4",style:{maxHeight:"90vh",width:j},children:[e.jsxs("div",{className:"w-full flex items-center justify-between pr-2",children:[e.jsx("div",{className:`${b?"animate__animated animate__fadeIn":""}`,children:e.jsxs(Q,{children:[r&&s.todas," ",s.agendamento_title," ",c?s.para+" "+c:""]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"bg-transparent border-solid border-[var(--primaria)] border rounded-lg text-[var(--primaria)] text-sm text-center self-center px-3 py-[4px] pulse relative",onClick:()=>f(e.jsx(ve,{userId:l,name:c})),children:[e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[s.relatorio,e.jsx(fe,{})]}),e.jsx("div",{className:"badge badge-primary !bg-[var(--primaria)] !text-white badge-sm absolute -top-2 -right-2",children:r?h.length:h.filter(t=>t.userID===l).length})]}),e.jsx("button",{className:`border-solid border-[var(--primary)] border rounded-full text-center
            ${r?"bg-[var(--primary-muted)] text-white":"bg-transparent text-[var(--primary)]"}
            self-center px-3 py-[4px] pulse lg:tooltip lg:tooltip-bottom text-sm transition-all duration-300 ease-in`,onClick:()=>V(),"data-tip":r?s.ocultarContatosDesc:s.exibirContatosDesc,children:e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[r?s.ocultar:s.exibirTodos,r?e.jsx(ge,{}):e.jsx(je,{})]})}),e.jsx("div",{className:u.confgIcone+"cursor-pointer pulse flex items-center justify-center !ml-0",children:e.jsx("div",{onClick:t=>B(e.jsx(_e,{}),t.currentTarget),className:u.iconeStyle+"cursor-pointer x11xpdln x1d8287x x1h4ghdb",children:e.jsx("span",{className:u.modalOptions.animChildren+"flex items-center justify-center",children:e.jsx(Y,{className:p.cor_primaria?"text-[var(--primaria)]":"text-[var(--panel-header-icon)]",size:20})})})})]})]}),e.jsx("div",{className:`${b?"animate__animated animate__fadeIn":""}`,children:x.length>0?e.jsxs("div",{style:{height:R(),maxHeight:N,width:"100%"},children:[e.jsx(G,{}),e.jsx(ie,{children:({height:t,width:i})=>e.jsx(re,{height:t-_,itemCount:x.length,itemSize:y,width:j,style:{overflowX:"hidden",width:j,minHeight:"50px"},children:F})})]}):e.jsxs("div",{className:"!h-fit flex flex-col items-center justify-center",children:[e.jsx(Z,{title:s.agendamentoEmptyTitle,description:s.agendamentoEmptyDesc,icon:e.jsx(ee,{className:"w-7 h-7 text-[var(--primaria)]"})}),((A=(w=p.videos_tutoriais)==null?void 0:w.mensagens_agendadas)==null?void 0:A.length)>0&&e.jsx(te,{funcao:()=>window.open(p.videos_tutoriais.mensagens_agendadas,"_blank")})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(ae,{name:s.adicionar,funcao:$})})]})}const Se=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));export{ve as R,Se as i};
